<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Otaku Tab</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Tailwind build output -->
  <link rel="stylesheet" href="dist/tailwind.css" />
  <style>
  html,body{overflow-x:hidden; height:100%;}
    /* Homepage row explicit styles (independent of Tailwind build) */
  /* Use original Tailwind-driven .otk-layout padding (p-4 lg:p-6) from tailwind.css */
  .otk-layout{overflow:hidden;}
  .otk-content{position:relative;overflow:visible;min-width:0;}
  @media (min-width:640px){.otk-content{padding-left:0;}}
  @media (min-width:1024px){.otk-content{padding-left:0;}}
    .hp-row-wrapper { position: relative; overflow:hidden; }
    .hp-row { 
      display:flex; gap:.85rem; overflow-x:auto; padding:.4rem 0 1rem 0; 
      -webkit-overflow-scrolling:touch; scroll-snap-type:x proximity; scroll-behavior:smooth;
      scrollbar-width: thin; scrollbar-color: rgba(139,92,246,.6) transparent; width:100%; max-width:100%; box-sizing:border-box;
      overscroll-behavior-x:contain; contain:content; 
    }
    .hp-row-wrapper.is-overflow:after, .hp-row-wrapper.is-overflow:before{
      content:""; position:absolute; top:0; bottom:0; width:54px; pointer-events:none; z-index:2; transition:opacity .4s;
      background:linear-gradient(90deg,rgba(15,23,42,1),rgba(15,23,42,0));
    }
    .hp-row-wrapper.is-overflow:after{ right:0; transform:scaleX(-1); }
    .hp-row-wrapper.in-view:before, .hp-row-wrapper.in-view:after{ opacity:.85; }
    .hp-nav { position:absolute; top:8px; right:10px; display:flex; gap:.5rem; z-index:3; }
    .hp-btn { 
      background:rgba(30,41,79,.7); border:1px solid rgba(139,92,246,.35); color:#e0eaff; width:34px; height:34px;
      border-radius:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:16px; font-weight:600;
      backdrop-filter:blur(10px); box-shadow:0 2px 10px -2px rgba(0,0,0,.6); transition:all .35s;
    }
    .hp-btn:hover { border-color:rgba(139,92,246,.65); color:#fff; box-shadow:0 4px 18px -4px rgba(139,92,246,.55); transform:translateY(-2px); }
    .hp-btn:active { transform:translateY(0); }
    .hp-btn:focus-visible { outline:2px solid #c084fc; outline-offset:2px; }
    @media (prefers-reduced-motion:reduce){ .hp-card, .hp-thumb-wrapper img, .hp-btn{ transition:none!important; animation:none!important; } }
  @media (max-width: 639px){ .hp-row{gap:.75rem;} }
  @media (min-width:1280px){ .hp-row{gap:.95rem;} }
  /* Ensure parent grid doesn't allow child intrinsic overflow */
  main.otk-layout > * { min-width:0; }
  .grid { min-width:0; }
    .hp-row::-webkit-scrollbar { height:8px; }
    .hp-row::-webkit-scrollbar-track { background:transparent; }
    .hp-row::-webkit-scrollbar-thumb { background:linear-gradient(90deg,rgba(139,92,246,.8),rgba(255,0,127,.6)); border-radius:4px; }
    .hp-row::-webkit-scrollbar-thumb:hover { background:linear-gradient(90deg,rgba(139,92,246,1),rgba(255,0,127,.8)); }
    .hp-card { 
      width:150px; flex:none; scroll-snap-align:start; border:1px solid rgba(109,40,217,.35); 
      border-radius:16px; overflow:hidden; background:linear-gradient(145deg,rgba(31,41,72,.85),rgba(22,33,62,.65));
      backdrop-filter:blur(6px); display:flex; flex-direction:column; box-shadow:0 4px 18px -4px rgba(0,0,0,.55),0 0 0 1px rgba(139,92,246,.15);
      position:relative; transition:transform .45s cubic-bezier(.3,.8,.3,1), box-shadow .45s, border-color .45s; will-change:transform;
    }
    @media (min-width: 768px){ .hp-card { width:165px; } }
    .hp-card:before { content:""; position:absolute; inset:0; opacity:0; background:radial-gradient(circle at 50% 30%,rgba(139,92,246,.35),transparent 70%); transition:opacity .5s; }
    .hp-card:hover { transform:translateY(-10px) scale(1.03); border-color:rgba(139,92,246,.6); box-shadow:0 10px 28px -6px rgba(139,92,246,.35),0 0 0 1px rgba(139,92,246,.4); }
    .hp-card:hover:before { opacity:1; }
    .hp-thumb-wrapper { position:relative; width:100%; aspect-ratio:2/3; overflow:hidden; }
    .hp-thumb-wrapper img { width:100%; height:100%; object-fit:cover; display:block; transform:scale(1.05); transition:transform 1s ease; filter:saturate(1.05) contrast(1.05); }
    .hp-card:hover .hp-thumb-wrapper img { transform:scale(1.16); }
    .hp-meta { padding:.6rem .65rem .75rem; display:flex; flex-direction:column; gap:.35rem; font-size:11px; line-height:1.15; font-weight:500; }
    .hp-meta { color:#e0ebff; text-shadow:0 0 3px rgba(0,0,0,.4); }
    .hp-meta:hover { color:#fff; }
    .hp-score { font-size:10px; font-weight:600; color:#caa9ff; letter-spacing:.5px; }
    .hp-card:focus-visible { outline:2px solid #c084fc; outline-offset:2px; }
    .hp-card img { pointer-events:none; }
    .hp-row .skeleton { flex:none; width:150px; height:240px; border-radius:16px; }
    @media (min-width:768px){ .hp-row .skeleton { width:165px; } }
    @media (min-width:1024px){ .hp-row { gap:1.25rem; } }
  </style>
</head>
<body>
  <main class="otk-layout">
    <aside class="otk-panel" id="schedule-panel" aria-labelledby="today-title">
      <header class="flex items-center justify-between gap-3">
        <h1 class="otk-app-title">Otaku Tab</h1>
      </header>
      <div class="flex items-center justify-between gap-3">
        <h2 id="today-title" class="otk-section-title">Today's Airing</h2>
        <div class="flex items-center gap-2">
          <label for="sort-select" class="sr-only">Sort by</label>
          <div class="relative">
            <select id="sort-select" class="otk-select text-xs px-2 py-1 w-auto min-w-0 pr-6">
              <option value="score_desc">Score ↓</option>
              <option value="score_asc">Score ↑</option>
              <option value="title_asc">Title A-Z</option>
              <option value="title_desc">Title Z-A</option>
              <option value="time_asc">Time ↑</option>
              <option value="time_desc">Time ↓</option>
              <option value="episodes_desc">Episodes ↓</option>
              <option value="episodes_asc">Episodes ↑</option>
            </select>
            <div class="absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none text-cyber-300 text-xs">▼</div>
          </div>
        </div>
      </div>
      <div id="schedule-list" class="flex-1 min-h-0 overflow-y-auto otk-scroll grid gap-3" role="list"></div>
      <div id="schedule-error" class="otk-error hidden" role="alert"></div>
    </aside>
    <section class="otk-content" id="content-area">
      <div class="grid gap-4 sm:grid-cols-[2fr_auto] items-start">
        <div class="otk-search-wrapper">
          <label for="search-input" class="sr-only">Search anime</label>
          <input id="search-input" class="otk-input" type="text" placeholder="Search anime..." autocomplete="off" aria-autocomplete="list" aria-expanded="false" />
          <ul id="search-results" class="otk-search-results hidden" role="listbox" aria-label="Search results"></ul>
          <div id="search-error" class="otk-error hidden" role="alert"></div>
        </div>
        <div class="flex flex-col gap-2">
          <button id="discover-btn" class="otk-btn" aria-haspopup="dialog">Discover Random Anime</button>
          <div id="discover-error" class="otk-error hidden" role="alert"></div>
        </div>
      </div>
      <section aria-labelledby="trending-title" class="flex flex-col gap-4 min-h-0">
        <div class="flex items-center justify-between gap-3">
          <h2 id="trending-title" class="otk-section-title">Trending Now</h2>
          <a href="https://anilist.co/search/anime/trending" target="_blank" rel="noopener" class="otk-link text-xs">View All →</a>
        </div>
        <div class="hp-row-wrapper" role="list">
          <div id="row-trending" class="hp-row" aria-label="Trending anime" role="list"></div>
        </div>

        <div class="flex items-center justify-between gap-3 mt-2">
          <h2 id="popular-title" class="otk-section-title">Popular This Season</h2>
          <a href="https://anilist.co/search/anime/popular" target="_blank" rel="noopener" class="otk-link text-xs">View All →</a>
        </div>
        <div class="hp-row-wrapper" role="list">
          <div id="row-popular" class="hp-row" aria-label="Popular season anime" role="list"></div>
        </div>
      </section>
    </section>
  </main>

  <!-- Modal for Discover -->
  <div id="discover-modal" class="otk-modal hidden" role="dialog" aria-modal="true" aria-labelledby="discover-modal-title">
    <div class="otk-modal-content">
      <button id="modal-close" class="otk-modal-close" aria-label="Close dialog">&times;</button>
      <h2 id="discover-modal-title" class="otk-modal-title">Random Anime</h2>
      <div id="discover-loading" class="text-xs tracking-wide text-cyber-300 animate-pulse hidden">Loading...</div>
      <div id="discover-result" class="otk-discover-result" role="document"></div>
    </div>
  </div>

  <script type="module" src="src/main.js"></script>
</body>
</html>
