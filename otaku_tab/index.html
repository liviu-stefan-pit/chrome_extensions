<!DOCTYPE html>
<html lang="en">
<h    .ad-close{position:    @media (max-width:820px){ .ad-hero{grid-template-columns:120px 1fr;gap:1rem;padding:1rem 1.25rem 1.25rem;} .ad-cover{width:120px;border-radius:16px;} .ad-body{padding:0 1.25rem 1.5rem;} .ad-desc{max-height:200px;} .ad-close{top:12px;right:12px;width:38px;height:38px;font-size:20px;} }
    @media (max-width:560px){ .ad-hero{grid-template-columns:1fr;align-items:center;text-align:center;} .ad-cover{width:170px;margin:0 auto;} .ad-title{text-align:center;} .ad-badges{justify-content:center;} .ad-sub,.ad-tags,.ad-airing,.ad-score,.ad-actions{justify-content:center;text-align:center;} .ad-desc{text-align:left;} .ad-close{top:8px;right:8px;width:34px;height:34px;font-size:18px;} }solute;top:18px;right:18px;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.3);color:#fff;width:44px;height:44px;border-radius:50%;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(12px);transition:all .3s;font-weight:700;z-index:10;box-shadow:0 4px 12px rgba(0,0,0,.4);}
    .ad-close:hover{background:rgba(255,255,255,.2);border-color:rgba(255,255,255,.5);transform:scale(1.1);} .ad-close:active{transform:scale(0.95);} .ad-close:focus-visible{outline:3px solid #c084fc;outline-offset:3px;}
    .ad-header{position:relative;}
    .ad-banner{height:200px;overflow:hidden;border-top-left-radius:28px;border-top-right-radius:28px;position:relative;background:linear-gradient(135deg,#1e2a47,#2a3f63);}
    .ad-banner img{width:100%;height:100%;object-fit:cover;filter:brightness(.85) saturate(1.1);}
    .ad-hero{display:grid;grid-template-columns:160px 1fr;gap:1.5rem;padding:1.5rem 1.75rem 1.5rem;margin-top:0;position:relative;align-items:flex-start;}  <meta charset="UTF-8" />
  <title>Otaku Tab</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Tailwind build output -->
  <link rel="stylesheet" href="dist/tailwind.css" />
  <style>
  html,body{overflow-x:hidden; height:100%;}
    /* Homepage row explicit styles (independent of Tailwind build) */
  /* Use original Tailwind-driven .otk-layout padding (p-4 lg:p-6) from tailwind.css */
  .otk-layout{overflow:hidden;}
  .otk-content{position:relative;overflow:visible;min-width:0;}
  @media (min-width:640px){.otk-content{padding-left:0;}}
  @media (min-width:1024px){.otk-content{padding-left:0;}}
    .hp-row-wrapper { position: relative; overflow:hidden; }
    .hp-row { 
      display:flex; gap:.85rem; overflow-x:auto; padding:.4rem 0 1rem 0; 
      -webkit-overflow-scrolling:touch; scroll-snap-type:x proximity; scroll-behavior:smooth;
      scrollbar-width: thin; scrollbar-color: rgba(139,92,246,.6) transparent; width:100%; max-width:100%; box-sizing:border-box;
      overscroll-behavior-x:contain; contain:content; 
    }
  .hp-row-wrapper.is-overflow:after, .hp-row-wrapper.is-overflow:before{ display:none; }
    @media (prefers-reduced-motion:reduce){ .hp-card, .hp-thumb-wrapper img, .hp-btn{ transition:none!important; animation:none!important; } }
  @media (max-width: 639px){ .hp-row{gap:.75rem;} }
  @media (min-width:1280px){ .hp-row{gap:.95rem;} }
  /* Ensure parent grid doesn't allow child intrinsic overflow */
  main.otk-layout > * { min-width:0; }
  .grid { min-width:0; }

  /* Anime Detail Modal */
  .ad-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,42,.82);backdrop-filter:blur(14px);z-index:70;padding:2rem;}
  .ad-overlay.hidden{display:none !important;}
  .ad-modal{position:relative;width:clamp(320px,960px,90vw);max-height:90vh;overflow-y:auto;background:linear-gradient(145deg,rgba(25,35,58,.95),rgba(18,26,46,.9));border:1px solid rgba(139,92,246,.35);border-radius:28px;box-shadow:0 10px 40px -8px rgba(0,0,0,.7),0 0 0 1px rgba(139,92,246,.25);padding:0;}
  .ad-close{position:absolute;top:14px;right:14px;background:rgba(40,52,85,.7);border:1px solid rgba(139,92,246,.4);color:#dbe4ff;width:40px;height:40px;border-radius:14px;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px);transition:all .3s;font-weight:600;}
  .ad-close:hover{border-color:rgba(139,92,246,.7);color:#fff;transform:translateY(-2px);} .ad-close:active{transform:translateY(0);} .ad-close:focus-visible{outline:2px solid #c084fc;outline-offset:4px;}
  .ad-header{position:relative;}
  .ad-banner{height:180px;overflow:hidden;border-top-left-radius:28px;border-top-right-radius:28px;position:relative;background:#1e2a47;}
  .ad-banner img{width:100%;height:100%;object-fit:cover;filter:brightness(.9) saturate(1.05);}
  .ad-hero{display:grid;grid-template-columns:160px 1fr;gap:1.5rem;padding:1.25rem 1.75rem 1.5rem;margin-top:0;position:relative;align-items:flex-end;}
  .ad-cover{width:160px;aspect-ratio:2/3;border-radius:20px;overflow:hidden;box-shadow:0 6px 24px -6px rgba(0,0,0,.6),0 0 0 1px rgba(139,92,246,.25);} .ad-cover img{width:100%;height:100%;object-fit:cover;}
  .ad-hero-meta{display:flex;flex-direction:column;gap:.7rem;}
  .ad-title{margin:0;font-size:clamp(1.4rem,2.1vw,2.15rem);font-weight:700;letter-spacing:.5px;background:linear-gradient(90deg,#c084fc,#60a5fa,#22d3ee);-webkit-background-clip:text;background-clip:text;color:transparent;}
  .ad-badges{display:flex;flex-wrap:wrap;gap:.5rem;margin:.25rem 0 .15rem;}
  .ad-badge{display:inline-flex;align-items:center;font-size:.65rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;padding:.4rem .65rem;border:1px solid rgba(139,92,246,.4);border-radius:999px;background:rgba(30,41,72,.55);backdrop-filter:blur(6px);color:#e0ebff;}
  .ad-sub{font-size:.75rem;letter-spacing:.05em;font-weight:500;color:#bcd3ff;opacity:.9;}
  .ad-tags{font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;color:#8898b5;display:flex;flex-wrap:wrap;gap:.5rem;}
  .ad-airing{font-size:.7rem;color:#caa9ff;font-weight:600;}
  .ad-score{font-size:1.1rem;font-weight:700;color:#fcd34d;text-shadow:0 0 10px rgba(252,211,77,.45);}
  .ad-actions{display:flex;gap:.75rem;margin-top:.25rem;}
  .ad-body{padding:0 1.75rem 2rem;}
  .ad-desc{font-size:.8rem;line-height:1.4;white-space:pre-line;color:#d2ddf5;background:rgba(29,41,72,.55);border:1px solid rgba(139,92,246,.25);padding:1rem 1.25rem;border-radius:18px;backdrop-filter:blur(4px);max-height:260px;overflow:auto;}
  .ad-desc::-webkit-scrollbar{width:6px;} .ad-desc::-webkit-scrollbar-thumb{background:linear-gradient(#8b5cf6,#ec4899);border-radius:3px;}
  @media (max-width:820px){ .ad-hero{grid-template-columns:120px 1fr;margin-top:-60px;gap:1rem;padding:1rem 1.25rem 1.25rem;} .ad-cover{width:120px;border-radius:16px;} .ad-body{padding:0 1.25rem 1.5rem;} .ad-desc{max-height:200px;} }
  @media (max-width:560px){ .ad-hero{grid-template-columns:1fr;margin-top:-30px;align-items:center;text-align:center;} .ad-cover{width:170px;margin:-60px auto 0;} .ad-title{text-align:center;} .ad-badges{justify-content:center;} .ad-sub,.ad-tags,.ad-airing,.ad-score,.ad-actions{justify-content:center;text-align:center;} .ad-desc{text-align:left;} }
    .hp-row::-webkit-scrollbar { height:8px; }
    .hp-row::-webkit-scrollbar-track { background:transparent; }
    .hp-row::-webkit-scrollbar-thumb { background:linear-gradient(90deg,rgba(139,92,246,.8),rgba(255,0,127,.6)); border-radius:4px; }
    .hp-row::-webkit-scrollbar-thumb:hover { background:linear-gradient(90deg,rgba(139,92,246,1),rgba(255,0,127,.8)); }
    .hp-card { 
      width:150px; flex:none; scroll-snap-align:start; border:1px solid rgba(109,40,217,.35); 
      border-radius:16px; overflow:hidden; background:linear-gradient(145deg,rgba(31,41,72,.85),rgba(22,33,62,.65));
      backdrop-filter:blur(6px); display:flex; flex-direction:column; box-shadow:0 4px 18px -4px rgba(0,0,0,.55),0 0 0 1px rgba(139,92,246,.15);
      position:relative; transition:transform .45s cubic-bezier(.3,.8,.3,1), box-shadow .45s, border-color .45s; will-change:transform;
    }
    @media (min-width: 768px){ .hp-card { width:165px; } }
    .hp-card:before { content:""; position:absolute; inset:0; opacity:0; background:radial-gradient(circle at 50% 30%,rgba(139,92,246,.35),transparent 70%); transition:opacity .5s; }
    .hp-card:hover { transform:translateY(-10px) scale(1.03); border-color:rgba(139,92,246,.6); box-shadow:0 10px 28px -6px rgba(139,92,246,.35),0 0 0 1px rgba(139,92,246,.4); }
    .hp-card:hover:before { opacity:1; }
    .hp-thumb-wrapper { position:relative; width:100%; aspect-ratio:2/3; overflow:hidden; }
    .hp-thumb-wrapper img { width:100%; height:100%; object-fit:cover; display:block; transform:scale(1.05); transition:transform 1s ease; filter:saturate(1.05) contrast(1.05); }
    .hp-card:hover .hp-thumb-wrapper img { transform:scale(1.16); }
    .hp-meta { padding:.6rem .65rem .75rem; display:flex; flex-direction:column; gap:.35rem; font-size:11px; line-height:1.15; font-weight:500; }
    .hp-meta { color:#e0ebff; text-shadow:0 0 3px rgba(0,0,0,.4); }
    .hp-meta:hover { color:#fff; }
    .hp-score { font-size:10px; font-weight:600; color:#caa9ff; letter-spacing:.5px; }
    .hp-card:focus-visible { outline:2px solid #c084fc; outline-offset:2px; }
    .hp-card img { pointer-events:none; }
    .hp-row .skeleton { flex:none; width:150px; height:240px; border-radius:16px; }
    @media (min-width:768px){ .hp-row .skeleton { width:165px; } }
    @media (min-width:1024px){ .hp-row { gap:1.25rem; } }
  </style>
</head>
<body>
  <main class="otk-layout">
    <aside class="otk-panel" id="schedule-panel" aria-labelledby="today-title">
      <header class="flex items-center justify-between gap-3">
        <h1 class="otk-app-title">Otaku Tab</h1>
      </header>
      <div class="flex items-center justify-between gap-3">
        <h2 id="today-title" class="otk-section-title">Today's Airing</h2>
        <div class="flex items-center gap-2">
          <label for="sort-select" class="sr-only">Sort by</label>
          <div class="relative">
            <select id="sort-select" class="otk-select text-xs px-2 py-1 w-auto min-w-0 pr-6">
              <option value="score_desc">Score ↓</option>
              <option value="score_asc">Score ↑</option>
              <option value="title_asc">Title A-Z</option>
              <option value="title_desc">Title Z-A</option>
              <option value="time_asc">Time ↑</option>
              <option value="time_desc">Time ↓</option>
              <option value="episodes_desc">Episodes ↓</option>
              <option value="episodes_asc">Episodes ↑</option>
            </select>
            <div class="absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none text-cyber-300 text-xs">▼</div>
          </div>
        </div>
      </div>
      <div id="schedule-list" class="flex-1 min-h-0 overflow-y-auto otk-scroll grid gap-3" role="list"></div>
      <div id="schedule-error" class="otk-error hidden" role="alert"></div>
    </aside>
    <section class="otk-content" id="content-area">
      <div class="grid gap-4 sm:grid-cols-[2fr_auto] items-start">
        <div class="otk-search-wrapper">
          <label for="search-input" class="sr-only">Search anime</label>
          <input id="search-input" class="otk-input" type="text" placeholder="Search anime..." autocomplete="off" aria-autocomplete="list" aria-expanded="false" />
          <ul id="search-results" class="otk-search-results hidden" role="listbox" aria-label="Search results"></ul>
          <div id="search-error" class="otk-error hidden" role="alert"></div>
        </div>
        <div class="flex flex-col gap-2">
          <button id="discover-btn" class="otk-btn" aria-haspopup="dialog">Discover Random Anime</button>
          <div id="discover-error" class="otk-error hidden" role="alert"></div>
        </div>
      </div>
      <section aria-labelledby="trending-title" class="flex flex-col gap-4 min-h-0">
        <div class="flex items-center justify-between gap-3">
          <h2 id="trending-title" class="otk-section-title">Trending Now</h2>
          <a href="https://anilist.co/search/anime/trending" target="_blank" rel="noopener" class="otk-link text-xs">View All →</a>
        </div>
        <div class="hp-row-wrapper" role="list">
          <div id="row-trending" class="hp-row" aria-label="Trending anime" role="list"></div>
        </div>

        <div class="flex items-center justify-between gap-3 mt-2">
          <h2 id="popular-title" class="otk-section-title">Popular This Season</h2>
          <a href="https://anilist.co/search/anime/popular" target="_blank" rel="noopener" class="otk-link text-xs">View All →</a>
        </div>
        <div class="hp-row-wrapper" role="list">
          <div id="row-popular" class="hp-row" aria-label="Popular season anime" role="list"></div>
        </div>
      </section>
    </section>
  </main>

  <!-- Modal for Discover -->
  <div id="discover-modal" class="otk-modal hidden" role="dialog" aria-modal="true" aria-labelledby="discover-modal-title">
    <div class="otk-modal-content">
      <button id="modal-close" class="otk-modal-close" aria-label="Close dialog">&times;</button>
      <h2 id="discover-modal-title" class="otk-modal-title">Random Anime</h2>
      <div id="discover-loading" class="text-xs tracking-wide text-cyber-300 animate-pulse hidden">Loading...</div>
      <div id="discover-result" class="otk-discover-result" role="document"></div>
    </div>
  </div>

  <script type="module" src="src/main.js"></script>
</body>
</html>
