@tailwind base;
@tailwind components;
@tailwind utilities;

/* Anime-inspired neon theme design system */
@layer components {
  /* Layout containers - new structure */
  .otk-layout { 
    @apply relative z-10 grid h-screen min-h-screen gap-4 p-3 
    lg:grid-cols-[300px_1fr] lg:gap-6 lg:p-5; 
  }
  
  /* Favorites panel - left sidebar */
  .otk-favorites-panel { 
    @apply relative flex flex-col min-h-0 rounded-2xl border border-dark-border/30 
    bg-gradient-to-br from-dark-panel/95 to-dark-surface/90 backdrop-blur-xl 
    p-4 shadow-card overflow-hidden;
  }
  .otk-favorites-panel:before { 
    content:""; 
    @apply pointer-events-none absolute inset-0 
    bg-[radial-gradient(circle_at_30%_20%,rgba(167,139,250,0.08),transparent_60%)] 
    mix-blend-overlay; 
  }
  
  /* Main content panel */
  .otk-content-panel { 
    @apply relative flex flex-col min-h-0 rounded-2xl border border-dark-border/30 
    bg-gradient-to-br from-dark-panel/95 to-dark-surface/90 backdrop-blur-xl 
    p-5 shadow-card overflow-hidden;
  }
  .otk-content-panel:before { 
    content:""; 
    @apply pointer-events-none absolute inset-0 
    bg-[radial-gradient(circle_at_70%_30%,rgba(167,139,250,0.08),transparent_60%)] 
    mix-blend-overlay; 
  }
  
  .otk-content { @apply flex flex-col gap-6 min-h-0; }

  /* Titles with neon glow */
  .otk-app-title { 
    @apply m-0 text-3xl font-bold tracking-wide text-transparent 
    bg-gradient-to-r from-neon-purple via-neon-pink to-neon-cyan bg-clip-text 
    drop-shadow-lg animate-glow; 
  }
  .otk-section-title { 
    @apply mt-4 mb-3 text-xs font-bold tracking-[0.2em] uppercase text-cyber-300 
    flex items-center gap-2; 
  }

  /* Custom scrollbars */
  .otk-scroll { scrollbar-width: thin; scrollbar-color: rgba(139, 92, 246, 0.6) transparent; }
  .otk-scroll::-webkit-scrollbar { width: 6px; }
  .otk-scroll::-webkit-scrollbar-track { background: transparent; border-radius: 3px; }
  .otk-scroll::-webkit-scrollbar-thumb { 
    background: linear-gradient(180deg, rgba(139, 92, 246, 0.8), rgba(255, 0, 127, 0.6)); 
    border-radius: 3px; 
    transition: all 0.3s ease;
  }
  .otk-scroll::-webkit-scrollbar-thumb:hover { 
    background: linear-gradient(180deg, rgba(139, 92, 246, 1), rgba(255, 0, 127, 0.8)); 
    box-shadow: 0 0 5px rgba(139, 92, 246, 0.5);
  }

  /* Inputs with neon styling */
  .otk-input { 
    @apply w-full rounded-xl bg-dark-card/60 border border-cyber-600/30 backdrop-blur-sm
    px-4 py-3 text-sm text-cyber-100 shadow-neon-sm
    focus:outline-none focus:border-neon-purple focus:shadow-neon-md transition-all duration-300
    placeholder:text-cyber-400; 
  }
  .otk-select { @apply otk-input appearance-none pr-8; }
  .otk-select:after { content: "â–¼"; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); pointer-events: none; color: rgb(143 209 182); font-size: 12px; }

  /* Buttons with neon effects */
  .otk-btn { 
    @apply relative overflow-hidden inline-flex items-center justify-center rounded-xl 
    bg-gradient-to-r from-neon-purple to-neon-pink text-white font-bold tracking-wide text-sm 
    px-6 py-3 shadow-neon-md transition-all duration-300 
    hover:shadow-neon-lg hover:-translate-y-1 hover:scale-105
    active:translate-y-0 active:scale-100; 
  }
  .otk-btn:before { 
    content:""; 
    @apply absolute inset-0 opacity-0 transition-opacity duration-300 
    bg-gradient-to-tr from-white/20 to-transparent; 
  }
  .otk-btn:hover:before { @apply opacity-100; }
  .otk-btn-subtle { 
    @apply inline-flex items-center justify-center rounded-lg 
    bg-dark-card/60 border border-cyber-600/40 text-cyber-300 text-xs font-medium 
    px-3 py-2 shadow-neon-sm backdrop-blur-sm
    hover:text-cyber-100 hover:border-neon-purple hover:shadow-neon-md 
    transition-all duration-300; 
  }

  /* Cards with cyber styling */
  .otk-card { 
    @apply flex gap-4 rounded-xl bg-dark-card/40 border border-cyber-600/30 backdrop-blur-sm
    p-4 items-center shadow-card transition-all duration-300 
    hover:-translate-y-1 hover:border-neon-purple/50 hover:shadow-neon-md hover:bg-dark-card/60; 
  }
  .otk-card:first-child { 
    @apply mt-2; 
  }
  .otk-card img { 
    @apply w-[70px] h-[96px] object-cover rounded-lg transition-all duration-300 
    shadow-lg; 
  }
  .otk-card:hover img { 
    @apply scale-105 shadow-neon-sm; 
  }
  .otk-card-title { @apply text-sm font-semibold leading-snug line-clamp-2 text-cyber-100; }
  .otk-card-meta { @apply flex flex-wrap gap-2 items-center text-[10px] tracking-wide mt-1; }

  /* Neon badges */
  .otk-badge { 
    @apply inline-flex items-center gap-1 rounded-full border px-2 py-1 text-[10px] 
    font-medium tracking-wide uppercase transition-all duration-300; 
  }
  .otk-badge-outline { 
    @apply otk-badge border-cyber-500/40 bg-dark-card/60 text-cyber-300 
    hover:border-neon-purple/60 hover:text-cyber-200 hover:shadow-neon-sm; 
  }
  .otk-badge-accent { 
    @apply otk-badge bg-gradient-to-r from-neon-purple to-neon-pink 
    text-white border-neon-purple shadow-neon-sm font-bold; 
  }

  /* Highlights grid */
  .otk-highlights-grid { 
    @apply grid gap-4 sm:gap-6 
    grid-cols-[repeat(auto-fill,minmax(160px,1fr))] 
    md:grid-cols-[repeat(auto-fill,minmax(180px,1fr))] 
    xl:grid-cols-[repeat(auto-fill,minmax(200px,1fr))]; 
  }
  .otk-highlight-card { 
    @apply relative flex flex-col bg-dark-card/40 border border-cyber-600/30 
    rounded-xl overflow-hidden text-cyber-100 min-h-[240px] shadow-card backdrop-blur-sm
    transition-all duration-300 hover:-translate-y-2 hover:border-neon-purple/50 
    hover:shadow-neon-md animate-float; 
  }
  .otk-highlight-card img { @apply w-full aspect-[2/3] object-cover; }
  .otk-highlight-info { @apply p-3 flex flex-col gap-2; }
  .otk-highlight-title { 
    @apply text-xs font-semibold leading-snug line-clamp-2 md:text-sm text-cyber-100; 
  }
  .otk-highlight-score { 
    @apply text-[10px] inline-flex gap-1 items-center bg-dark-card/60 px-2 py-1 
    rounded-full border border-cyber-600/40 text-cyber-300; 
  }

  /* Modal with neon styling */
  .otk-modal { 
    @apply fixed inset-0 z-50 flex items-center justify-center 
    bg-dark-bg/80 backdrop-blur-md; 
  }
  .otk-modal-content { 
    @apply relative w-[92%] max-w-[880px] max-h-[85vh] overflow-y-auto rounded-2xl 
    border border-cyber-600/50 bg-gradient-to-br from-dark-surface/95 to-dark-card/90 
    backdrop-blur-xl p-6 flex flex-col gap-6 shadow-neon-lg; 
  }
  .otk-modal-title { 
    @apply m-0 text-sm font-bold tracking-wide uppercase text-cyber-300; 
  }
  .otk-modal-close { 
    @apply absolute top-4 right-4 text-xl leading-none px-3 py-1 rounded-lg 
    bg-dark-card/60 border border-cyber-600/40 text-cyber-300 backdrop-blur-sm
    hover:text-cyber-100 hover:border-neon-purple hover:shadow-neon-sm 
    transition-all duration-300; 
  }
  .otk-discover-result { @apply grid gap-6 grid-cols-1 md:grid-cols-[220px_1fr]; }
  .otk-discover-image img { 
    @apply w-full rounded-2xl shadow-neon-md aspect-[2/3] object-cover; 
  }
  .otk-discover-meta h3 { 
    @apply m-0 text-xl font-bold tracking-wide text-transparent 
    bg-gradient-to-r from-neon-purple to-neon-cyan bg-clip-text; 
  }
  .otk-discover-meta .score { 
    @apply inline-flex items-center gap-1 rounded-full bg-dark-card/60 
    border border-cyber-600/40 px-3 py-1 text-xs tracking-wide text-cyber-300 mb-3; 
  }
  .otk-discover-meta .genres { 
    @apply text-[10px] tracking-[0.15em] uppercase text-cyber-400 mb-3 leading-snug; 
  }
  .otk-discover-meta .synopsis { 
    @apply text-[13px] leading-relaxed whitespace-pre-line bg-dark-card/60 
    border border-cyber-600/30 p-4 rounded-xl max-w-prose backdrop-blur-sm; 
  }

  /* Search with neon styling */
  .otk-search-wrapper { @apply relative; }
  .otk-search-results { 
    @apply list-none m-0 p-0 absolute left-0 right-0 bg-dark-surface/95 
    border border-cyber-600/50 rounded-xl shadow-neon-lg max-h-[340px] overflow-y-auto z-20 
    backdrop-blur-xl; 
  }
  .otk-search-results li a { 
    @apply flex gap-3 items-center no-underline px-4 py-3 text-cyber-100 text-xs md:text-sm 
    hover:bg-dark-card/60 hover:text-cyber-50 transition-all duration-300; 
  }
  .otk-search-results img { @apply w-[42px] h-[60px] object-cover rounded-md shadow-sm; }

  /* Skeletons with neon pulse */
  .skeleton { 
    @apply relative overflow-hidden rounded-xl bg-dark-card/40 backdrop-blur-sm; 
  }
  .skeleton-item { @apply h-[96px]; }
  .skeleton::after { 
    content:""; 
    @apply absolute inset-0 animate-[shimmer_1.5s_linear_infinite] 
    bg-[linear-gradient(110deg,transparent_0%,rgba(139,92,246,0.3)_45%,transparent_90%)]; 
  }
  .skeleton-grid { @apply grid gap-4; }

  /* Utilities */
  .sr-only { 
    @apply absolute w-px h-px p-0 m-[-1px] overflow-hidden whitespace-nowrap border-0; 
  }
  .line-clamp-2 { 
    display:-webkit-box; 
    -webkit-line-clamp:2; 
    -webkit-box-orient:vertical; 
    overflow:hidden; 
  }
  .otk-error { @apply text-neon-pink text-[11px] mt-1 tracking-wide; }

  /* Homepage rows */
  .hp-row-wrapper { @apply relative overflow-hidden; }
  .hp-row { @apply flex gap-4 overflow-x-auto otk-scroll pb-2; }
  .hp-card { 
    @apply flex-none w-[140px] sm:w-[150px] md:w-[165px] rounded-xl bg-dark-card/40 border border-cyber-600/30 
    backdrop-blur-sm shadow-card overflow-hidden flex flex-col transition-all duration-300 
    hover:-translate-y-2 hover:border-neon-purple/50 hover:shadow-neon-md; 
  }
  .hp-thumb-wrapper { @apply relative w-full aspect-[2/3] overflow-hidden; }
  .hp-thumb-wrapper img { @apply w-full h-full object-cover transition-transform duration-500; }
  .hp-card:hover .hp-thumb-wrapper img { @apply scale-105; }
  .hp-meta { @apply p-2 flex flex-col gap-1 text-[11px] leading-snug font-medium line-clamp-2; }
  .hp-score { @apply block text-[10px] font-semibold text-neon-purple/90 mt-1; }
  .skeleton-tile { @apply w-[140px] sm:w-[150px] md:w-[165px] h-[220px]; }
  
  /* Favorites component styles */
  .fav-swimlanes {
    @apply flex gap-4 overflow-x-auto otk-scroll pb-3;
    scroll-snap-type: x proximity;
  }
  
  .fav-day-column {
    @apply flex-none w-[200px] flex flex-col gap-2;
    scroll-snap-align: start;
  }
  
  .fav-day-header {
    @apply text-xs font-bold tracking-wider uppercase text-cyber-300 px-2 py-2 
    flex items-center justify-between gap-2 bg-dark-card/40 rounded-lg border border-dark-border/50;
  }
  
  .fav-day-today .fav-day-header {
    @apply bg-gradient-to-r from-neon-purple/20 to-neon-pink/20 border-neon-purple/40 text-neon-purple;
  }
  
  .fav-today-badge {
    @apply text-[9px] px-2 py-0.5 rounded-full bg-neon-purple/30 text-white font-bold;
  }
  
  .fav-day-content {
    @apply flex flex-col gap-3 overflow-y-auto otk-scroll pr-1;
    max-height: calc(100vh - 200px);
  }
  
  .fav-card {
    @apply relative flex flex-col bg-dark-card/50 border border-cyber-600/30 
    rounded-xl overflow-hidden cursor-pointer transition-all duration-300 
    hover:-translate-y-1 hover:border-neon-purple/50 hover:shadow-neon-sm;
  }
  
  .fav-thumb-wrapper {
    @apply relative w-full aspect-[2/3] overflow-hidden;
  }
  
  .fav-thumb-wrapper img {
    @apply w-full h-full object-cover transition-transform duration-500;
  }
  
  .fav-card:hover .fav-thumb-wrapper img {
    @apply scale-105;
  }
  
  .fav-remove {
    @apply absolute top-1 right-1 w-7 h-7 rounded-full bg-dark-bg/80 backdrop-blur-sm 
    border border-neon-pink/50 text-neon-pink flex items-center justify-center 
    opacity-0 transition-all duration-300 hover:bg-neon-pink hover:text-white z-10;
  }
  
  /* Show remove button on card hover */
  .fav-remove.group:hover,
  .fav-card:hover .fav-remove {
    opacity: 1;
  }
  
  .fav-meta {
    @apply p-2 flex flex-col gap-1;
  }
  
  .fav-title {
    @apply text-[11px] font-semibold leading-snug line-clamp-2 text-cyber-100;
  }
  
  .fav-info {
    @apply flex items-center justify-between gap-1 text-[9px] text-cyber-300;
  }
  
  .fav-time {
    @apply font-medium;
  }
  
  .fav-score {
    @apply text-neon-purple/90 font-bold;
  }
  
  .fav-empty {
    @apply text-[10px] text-cyber-400 text-center py-8 px-2;
  }
  
  .fav-empty-state {
    @apply flex flex-col items-center justify-center gap-4 py-12 px-4 text-center;
  }
  
  .fav-empty-state svg {
    @apply text-cyber-600/50;
  }
  
  .fav-empty-state h3 {
    @apply text-lg font-bold text-cyber-300 m-0;
  }
  
  .fav-empty-state p {
    @apply text-sm text-cyber-400 max-w-xs m-0;
  }
  
  /* Favorite toggle button in cards */
  .fav-toggle {
    @apply relative inline-flex items-center justify-center w-9 h-9 rounded-full 
    bg-dark-card/80 backdrop-blur-sm border border-cyber-600/40 text-cyber-300 
    transition-all duration-300 hover:border-neon-pink hover:text-neon-pink hover:shadow-neon-sm 
    focus:outline-none focus:ring-2 focus:ring-neon-purple;
  }
  
  .fav-toggle.is-favorited {
    @apply bg-gradient-to-br from-neon-pink to-neon-purple border-neon-pink text-white shadow-neon-sm;
  }
  
  .fav-toggle svg {
    @apply w-5 h-5;
  }
}

@layer base {
  html, body { 
    @apply h-full m-0 font-sans bg-dark-bg text-cyber-100 text-[15px] leading-snug antialiased; 
  }
  body { @apply relative overflow-hidden; }
  body:before { 
    content:""; 
    @apply pointer-events-none fixed inset-0 opacity-40 mix-blend-overlay z-0
    bg-[radial-gradient(circle_at_20%_20%,rgba(167,139,250,0.12),transparent_45%),radial-gradient(circle_at_80%_80%,rgba(255,0,127,0.08),transparent_45%),radial-gradient(circle_at_40%_60%,rgba(96,165,250,0.06),transparent_50%)]; 
  }
  
  /* Animated background particles - more subtle */
  body:after {
    content: "";
    @apply pointer-events-none fixed inset-0 z-0 opacity-10;
    background-image: 
      radial-gradient(1px 1px at 20px 30px, rgba(167, 139, 250, 0.4), transparent),
      radial-gradient(1px 1px at 60px 70px, rgba(96, 165, 250, 0.3), transparent),
      radial-gradient(1px 1px at 140px 40px, rgba(52, 211, 153, 0.2), transparent);
    background-repeat: repeat;
    background-size: 300px 200px;
    animation: float 25s ease-in-out infinite;
  }
}

@layer utilities {
  @keyframes shimmer { 
    0% { transform:translateX(-100%);} 
    100% { transform:translateX(100%);} 
  }
  
  /* Responsive spacing */
  .safe-area { @apply p-4 lg:p-6; }
}
